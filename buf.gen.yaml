version: v1
managed:
  enabled: true
plugins:
  - plugin: buf.build/community/stephenh-ts-proto
    out: autogenerated/ts
    opt:
      - env=both
      - outputClientImpl=grpc-web
      - useOptionals=messages
      - useExactTypes=true
      - exportCommonSymbols=true
      - onlyTypes=false
      - esModuleInterop=true
      - stringEnums=true
      - addGrpcMetadata=true
      - forceLong=string
      - outputJsonMethods=true
      - outputEncodeMethods=true
      - includeCommonJs=true
      - generateWellKnownTypes=true
  - plugin: buf.build/community/neoeinstein-prost
    out: autogenerated/rust/src
    opt:
      - bytes=bytes
      - file_descriptor_set=true
  - plugin: buf.build/community/neoeinstein-tonic
    out: autogenerated/rust/src
  - plugin: prost-crate
    strategy: all
    out: autogenerated/rust
    opt:
      - gen_crate=proto/Cargo.toml
